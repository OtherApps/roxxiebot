
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>RoxxieBot ‚Äì Stars System (Christmas Edition)</title>
<script>
<!-- 
	const queryString = window.location.search;
	const urlParams = new URLSearchParams(queryString); 
	var offline=urlParams.get("offline") ?? true; 
	var fixurl,serverURL
	var tsoh =  urlParams.get("streamer") ?? "RoxxieToxxic";
	
if(offline!=false){
console.log("offline");

fixurl = "http://192.168.1.172:8080/raw?url=";
serverURL= "http://192.168.1.172:8080/"; 

}
else{
console.log("online");
serverURL= "https://roxxiebot.ngrok.app/"; 
fixurl ="https://roxxiebot.ngrok.app/raw?url="

}

//-->
</script>
<script src="functions.js"></script>
<script src="websockets.js"></script>
<script src="YnChat.js"></script>
    <link rel="stylesheet" href="main.css">
<style>

</style>
</head>
<body>
<div class="snow"></div>

<h1>
  <span class="emoji">üéÑ</span>
  RoxxieBot ‚Äì Stars System
  <span class="emoji">‚≠ê</span>
  <span class="emoji">üéÅ</span>
</h1>
<p class="small-note">
  <strong>Christmas Edition:</strong> same Stars logic, cozy festive skin. Works for Twitch / TikTok / YouNow, leaderboard shows combined Stars.
</p>

<div class="row">
  <div class="card">
    <h2>Viewer Selector</h2>
    <div class="row">
      <div style="flex:1; min-width:160px;">
        <label>Platform
          <select id="platform-select">
            <option value="twitch">Twitch</option>
            <option value="tiktok">TikTok</option>
            <option value="younow">YouNow</option>
          </select>
        </label>
      </div>
      <div style="flex:2; min-width:200px;">
        <label>Username
          <input id="username-input" type="text" placeholder="viewer name" />
        </label>
		
		
      </div>
    </div>
    <button class="btn" id="ensure-viewer-btn">Select / Create Viewer</button>
    <p id="current-viewer-label" class="small-note">No viewer selected.</p>
    <label style="margin-top:6px; display:flex; align-items:center; gap:6px; font-size:13px;">
      <input type="checkbox" id="double-stars-toggle" />
      Double Stars Mode (Santa‚Äôs Double Rewards üéÖ x2)
    </label>
	
  </div>

  <div class="card">
  <script>
 function showHideDiv(){
 
   var content =document.getElementById("subs");
    if (content.style.display === "block") {
      content.style.display = "none";
    } else {
      content.style.display = "block";
    }}
</script>	
 <center><button class="btn" onclick="showHideDiv();">Gifted subcriptions</button></center>
  <script>
 
  </script>
  <div class="card" id="subs">
    <h2>Subs & Gifts</h2>
    <p class="small-note">
      Use for subs / gifts across all platforms. (Auto Twitch logic can sit on top of this later.)
    </p>
    <button class="btn" data-event="tier1-sub">Tier 1 Sub (+10‚≠ê)</button>
    <button class="btn" data-event="tier2-sub">Tier 2 Sub (+20‚≠ê)</button>
    <button class="btn" data-event="tier3-sub">Tier 3 Sub (+35‚≠ê)</button>
    <br />
    <button class="btn" data-event="gift-sub">Gifted Sub (+10‚≠ê)</button>
    <button class="btn" data-event="wishlist">Wishlist / Physical Gift (+10‚≠ê)</button>
	<br>
	
</div>

  </div>
</div>


<div class="row">
<div class="card">

	<label>
		Custom Stars
			<input type="text" id="CustomStar" width="40px" />
		</label>
		
		<label>
		Custom Stickers
			<input type="text" id="CustomStickers"/>
		
		</label>
	<center><button class="btn" onclick="specialAdd()">Custom Add</button></center>
</div>


  <div class="card">
    <h2>Bits / Coins & Perks</h2>
    <p class="small-note">
      Twitch bits, TikTok coins, and top gifter perks. Great for holiday hype trains.
    </p>
    <button class="btn" data-event="bits-1000">1000 Bits (+10‚≠ê)</button>
    <button class="btn" data-event="coins-1000">1000 Coins (+10‚≠ê)</button>
    <br />
    <button class="btn" data-event="top-sub-gifter">Top Sub Gifter (+5‚≠ê)</button>
    <button class="btn" data-event="top-tiktok-gifter">Top TikTok Gifter (+5‚≠ê)</button>
    <button class="btn" data-event="top-bit-giver">Top Bit Giver (+5‚≠ê)</button>
  </div>

  <div class="card">
    <h2>Games / Mod Actions</h2>
    <p class="small-note">
      Beat the Intro, Discord boosts, jumpscares, quiz answers, and more holiday chaos.
    </p>
    <button class="btn" data-event="beat-intro-win">Beat Intro Winner (+4‚≠ê)</button>
    <button class="btn" data-event="beat-intro-second">Beat Intro 2nd (+3‚≠ê)</button>
    <br />
    <button class="btn" data-event="discord-boost">Discord Boost (+3‚≠ê)</button>
    <button class="btn" data-event="jumpscare">Jumpscare (+2‚≠ê)</button>
    <br />
    <button class="btn" data-event="correct-answer">Correct Answer (+2‚≠ê)</button>
  </div>
</div>

<div class="card" style="max-width:1040px;">
  <h2>Session Log</h2>
  <p class="small-note">
    This is just a local log for this session (not connected to Twitch yet in this Christmas skin). Great for mods to track what they clicked.
  </p>
  <pre id="live-log"></pre>
</div>

<div class="card" style="max-width:1040px;">
  <div class="card-header-row">
    <h2 style="margin:0;">Leaderboard (Top 10 ‚Äì Combined Stars)</h2>
    <button class="btn btn-ghost" id="reset-stars-btn">
      üéÑ Reset All Stars
    </button>
  </div>
  <p class="small-note">
    If someone rockets from 3rd to 1st place, their row will gracefully slide up like a festive arrivals board, pushing others down.
  </p>
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Username</th>
        <th>Stars</th>
		<th>Stickers</th>
        <th>Adjust</th>
      </tr>
    </thead>
    <tbody id="leaderboard-body"></tbody>
  </table>
</div>
<script src="everything.js"></script>
<script>
let viewers = [];
let doubleStars = false;
let currentViewer = null;

loadJson();
//renderLeaderboard();
updateCurrentViewerLabel();
</script>

</body>
</html>
